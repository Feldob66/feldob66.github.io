<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-en="Web Tech Playground" data-hu="Web Tech JÃ¡tszÃ³tÃ©r">Web Tech Playground</title>
    
    <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
    <link rel="stylesheet" href="../styles/styles.css">
    
    <style>
        /* Light Silver text for the entire playground */
        body {
            color: #C0C0C0; 
        }

        .container { 
            max-width: 800px; 
            padding-top: 60px; 
            padding-bottom: 40px; 
        }

        /* Lighter Orange Glassmorphism for the containers */
        .playground-card {
            background: rgba(255, 165, 0, 0.15); /* Light Orange tint */
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 200, 100, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            text-align: center;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
        }

        /* Ensuring all text within cards stays light silver */
        .playground-card h2, .playground-card h3, .playground-card p, .playground-card span {
            color: #E0E0E0; /* Silver/Off-white */
        }

        input, button {
            padding: 12px; border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.2);
            background: rgba(255,255,255,0.1);
            color: white; margin: 5px;
            transition: all 0.2s ease;
        }

        button:hover { 
            background: rgba(255, 165, 0, 0.3); /* Orange glow on hover */
            cursor: pointer; 
            transform: translateY(-1px); 
        }

        .emoji-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(45px, 1fr));
            gap: 10px; padding: 15px; 
            background: rgba(0,0,0,0.2); 
            border-radius: 12px;
        }

        .calc-row { display: flex; justify-content: center; align-items: center; gap: 8px; margin-bottom: 8px; }
        
        .result-btn { 
            background: #000; 
            color: #FF7F50; 
            border: 1px solid #FF7F50; 
            min-width: 80px; 
            font-weight: bold; 
        }

        .btndsbl2 { 
            background: rgba(0,0,0,0.3); 
            border-color: #FFA500; 
            color: #C0C0C0;
            cursor: default; 
            min-width: 150px; 
        }

        .hidden { display: none; }
        
        footer button {
            background: rgba(255, 70, 70, 0.2);
            border-color: rgba(255, 70, 70, 0.4);
        }
    </style>
</head>
<body>
    <div class="container">
        <button id="langToggle" class="lang-toggle" aria-label="Toggle language">
            <span class="lang-option active" data-lang="en">EN</span>
            <span class="lang-divider">|</span>
            <span class="lang-option" data-lang="hu">HU</span>
        </button>

        <header class="profile">
            <h1 data-en="Web Tech Playground" data-hu="Web Tech JÃ¡tszÃ³tÃ©r">Web Tech Playground</h1>
            <p class="tagline" data-en="Full Interactive JS Suite" data-hu="Teljes InteraktÃ­v JS KÃ©szlet">Full Interactive JS Suite</p>
        </header>

        <div class="playground-card">
            <h2 data-en="Dynamic Page Header" data-hu="Dinamikus OldalfejlÃ©c">Dynamic Page Header</h2>
            <input placeholder="New page title..." data-en-placeholder="Type new title..." data-hu-placeholder="Ãºj oldal cÃ­m..." id="ujize">
            <button onclick="changePageTitle()" data-en="Apply" data-hu="Alkalmaz">Apply</button>
        </div>

        <div class="playground-card">
            <h2 data-en="Interactive Replier" data-hu="InteraktÃ­v VÃ¡laszadÃ³">Interactive Replier</h2>
            
            <div id="greet-en">
                <p>I <input placeholder="love..." id="masolat1"> you!</p>
                <button onclick="message1()">Click Me!</button>
            </div>

            <div id="greet-hu" class="hidden">
                <p>Ã‰n <input placeholder="szeretlek..." id="masolat2"> tÃ©ged!</p>
                <button onclick="message2()">Nyomj meg!</button>
            </div>
        </div>

        <div class="playground-card">
            <h2 data-en="Logic Engine" data-hu="Logikai Motor">Logic Engine</h2>
            <div class="calc-row">
                <input style="width: 60px;" id="a5" type="number"> <span>+</span>
                <input style="width: 60px;" id="b5" type="number">
                <button onclick="calc('+', 'a5', 'b5', 'result5')">=</button>
                <button class="result-btn" id="result5" disabled>0</button>
            </div>
            <div class="calc-row">
                <input style="width: 60px;" id="a6" type="number"> <span>-</span>
                <input style="width: 60px;" id="b6" type="number">
                <button onclick="calc('-', 'a6', 'b6', 'result6')">=</button>
                <button class="result-btn" id="result6" disabled>0</button>
            </div>
            <div class="calc-row">
                <input style="width: 60px;" id="a7" type="number"> <span>Ã—</span>
                <input style="width: 60px;" id="b7" type="number">
                <button onclick="calc('*', 'a7', 'b7', 'result7')">=</button>
                <button class="result-btn" id="result7" disabled>0</button>
            </div>
            <div class="calc-row">
                <input style="width: 60px;" id="a8" type="number"> <span>Ã·</span>
                <input style="width: 60px;" id="b8" type="number">
                <button onclick="calc('/', 'a8', 'b8', 'result8')">=</button>
                <button class="result-btn" id="result8" disabled>NaN</button>
            </div>
        </div>

        <div class="playground-card">
            <h2 data-en="Emoji Hub" data-hu="Emoji KÃ¶zpont">Emoji Hub</h2>
            <h3 data-en="Click to copy, paste below to test:" data-hu="MÃ¡solÃ¡shoz kattints, tesztelÃ©shez illeszd be:">Click to copy, paste below to test:</h3>
            <input style="width: 90%; margin-bottom: 15px;" type="text" placeholder="Ctrl + V here">
            
            <div class="emoji-grid">
                <button onclick="SelfCopy('ğŸ¶')">ğŸ¶</button> <button onclick="SelfCopy('ğŸ‡')">ğŸ‡</button>
                <button onclick="SelfCopy('ğŸˆ')">ğŸˆ</button> <button onclick="SelfCopy('ğŸ‰')">ğŸ‰</button>
                <button onclick="SelfCopy('ğŸŠ')">ğŸŠ</button> <button onclick="SelfCopy('ğŸ‹')">ğŸ‹</button>
                <button onclick="SelfCopy('ğŸŒ')">ğŸŒ</button> <button onclick="SelfCopy('ğŸ')">ğŸ</button>
                <button onclick="SelfCopy('ğŸ¥­')">ğŸ¥­</button> <button onclick="SelfCopy('ğŸ')">ğŸ</button>
                <button onclick="SelfCopy('ğŸ')">ğŸ</button> <button onclick="SelfCopy('ğŸ')">ğŸ</button>
                <button onclick="SelfCopy('ğŸ‘')">ğŸ‘</button> <button onclick="SelfCopy('ğŸ’')">ğŸ’</button>
                <button onclick="SelfCopy('ğŸ“')">ğŸ“</button> <button onclick="SelfCopy('ğŸ¥')">ğŸ¥</button>
                <button onclick="SelfCopy('ğŸ…')">ğŸ…</button> <button onclick="SelfCopy('ğŸ¥¥')">ğŸ¥¥</button>
                <button onclick="SelfCopy('ğŸ¥‘')">ğŸ¥‘</button> <button onclick="SelfCopy('ğŸ†')">ğŸ†</button>
                <button onclick="SelfCopy('ğŸ¥”')">ğŸ¥”</button> <button onclick="SelfCopy('ğŸ¥•')">ğŸ¥•</button>
                <button onclick="SelfCopy('ğŸŒ½')">ğŸŒ½</button> <button onclick="SelfCopy('ğŸŒ¶ï¸')">ğŸŒ¶ï¸</button>
                <button onclick="SelfCopy('ğŸ¥’')">ğŸ¥’</button> <button onclick="SelfCopy('ğŸ¥¬')">ğŸ¥¬</button>
                <button onclick="SelfCopy('ğŸ¥¦')">ğŸ¥¦</button> <button onclick="SelfCopy('ğŸ§„')">ğŸ§„</button>
                <button onclick="SelfCopy('ğŸ§…')">ğŸ§…</button> <button onclick="SelfCopy('ğŸ„')">ğŸ„</button>
                <button onclick="SelfCopy('ğŸ¥œ')">ğŸ¥œ</button> <button onclick="SelfCopy('ğŸ')">ğŸ</button> 
                <button onclick="SelfCopy('ğŸ¥')">ğŸ¥</button> <button onclick="SelfCopy('ğŸ¥–')">ğŸ¥–</button> 
                <button onclick="SelfCopy('ğŸ¥¨')">ğŸ¥¨</button> <button onclick="SelfCopy('ğŸ¥¯')">ğŸ¥¯</button> 
                <button onclick="SelfCopy('ğŸ¥')">ğŸ¥</button> <button onclick="SelfCopy('ğŸ§‡')">ğŸ§‡</button> 
                <button onclick="SelfCopy('ğŸ§€')">ğŸ§€</button>
            </div>
        </div>

        <div class="playground-card">
            <h2 data-en="Unicode ASCII Explorer" data-hu="Unicode ASCII FelfedezÅ‘">Unicode ASCII Explorer</h2>
            <p data-en="Iterate through the global character library." data-hu="LÃ©ptetÃ©s a globÃ¡lis karakterkÃ¶nyvtÃ¡ron keresztÃ¼l.">Iterate through the global character library.</p>
            <button disabled id="demoinfo" class="btndsbl2">Character Code: 0 â¡ï¸</button>
            <button class="result-btn" id="demo" disabled>&#0;</button>
            <br>
            <button onclick="emojiGen()" data-en="Next Code" data-hu="KÃ¶vetkezÅ‘ KÃ³d">Next Code</button>
        </div>

        <footer>
            <button onclick="window.close()" data-en="Exit Playground" data-hu="KilÃ©pÃ©s">Exit Playground</button>
        </footer>
    </div>

    <script>
        let currentLang = 'en';
        let charNum = 0;

        // Refactored Translation logic to be more forceful with language pairs
        async function translateText(text, source, target) {
            if (!text || text.trim() === "") return text;
            try {
                // We explicitly tell Google the source and target to avoid detection errors
                const response = await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${source}&tl=${target}&dt=t&q=${encodeURI(text)}`);
                const data = await response.json();
                // Google returns an array of arrays; we grab the first translation result
                return data[0][0][0];
            } catch (e) { 
                console.error("Translation failed:", e);
                return text; 
            }
        }

        const langToggle = document.getElementById('langToggle');
        langToggle.addEventListener('click', async () => {
            // Store the OLD language before we swap
            const oldLang = currentLang;
            currentLang = currentLang === 'en' ? 'hu' : 'en';
            
            // 1. Translate current Page Title using the explicit old -> new pair
            // Handle exceptions for titles that Google doesn't translate well
            let translatedTitle = document.title;
            if (document.title === "Web Tech Playground" && oldLang === 'en' && currentLang === 'hu') {
                translatedTitle = "Web Tech JÃ¡tszÃ³tÃ©r";
            } else if (document.title === "Web Tech JÃ¡tszÃ³tÃ©r" && oldLang === 'hu' && currentLang === 'en') {
                translatedTitle = "Web Tech Playground";
            } else {
                // Use Google translation for other titles
                translatedTitle = await translateText(document.title, oldLang, currentLang);
            }
            
            // 2. Toggle UI Elements
            document.querySelectorAll('[data-en]').forEach(el => {
                el.textContent = el.getAttribute(`data-${currentLang}`);
            });
            document.querySelectorAll('[data-en-placeholder]').forEach(el => {
                el.placeholder = el.getAttribute(`data-${currentLang}-placeholder`);
            });

            // 3. Restore the translated title (after UI updates to prevent override)
            document.title = translatedTitle;

            // 4. Toggle Greeting Sections
            document.getElementById('greet-en').classList.toggle('hidden', currentLang !== 'en');
            document.getElementById('greet-hu').classList.toggle('hidden', currentLang !== 'hu');
            
            document.querySelectorAll('.lang-option').forEach(opt => opt.classList.toggle('active'));
        });

        function changePageTitle() {
            const val = document.getElementById('ujize').value;
            if(!val) {
                alert(currentLang === 'en' ? "Input is empty!" : "A mezÅ‘ Ã¼res!");
                return;
            }
            document.title = val;
        }

        function message1() {
            const val = document.getElementById('masolat1').value;
            alert(val ? `I ${val} you too!` : "You need to write something!");
        }

        function message2() {
            const val = document.getElementById('masolat2').value;
            alert(val ? `Ã‰n is ${val} tÃ©ged!` : "Ãrnod kell valamit!");
        }

        function calc(op, id1, id2, resId) {
            const n1 = Number(document.getElementById(id1).value);
            const n2 = Number(document.getElementById(id2).value);
            let res = op === '+' ? n1 + n2 : op === '-' ? n1 - n2 : op === '*' ? n1 * n2 : n1 / n2;
            document.getElementById(resId).innerHTML = res;
        }

        function emojiGen() {
            charNum++;
            document.getElementById('demo').innerHTML = `&#${charNum};`;
            const prefix = currentLang === 'en' ? "Character Code: " : "Karakter KÃ³d: ";
            document.getElementById('demoinfo').innerHTML = `${prefix}${charNum} â¡ï¸`;
        }

        function SelfCopy(emoji) {
            navigator.clipboard.writeText(emoji);
            alert((currentLang === 'en' ? "Copied: " : "MÃ¡solva: ") + emoji);
        }
    </script>
</body>
</html>